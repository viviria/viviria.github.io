<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>UE4覚え書き</title>
<link rel="stylesheet" href="css/default/wiki.css" type="text/css">
</head>
<body>
<h1>UE4覚え書き</h1>
<h2><a name="i0"> Android環境の構築</a></h2>
<p>
UE4 4.24.3</p>
<p>
公式ドキュメント <a href="https://docs.unrealengine.com/ja/Platforms/Mobile/Android/GettingStarted/1/index.html">https://docs.unrealengine.com/ja/Platforms/Mobile/Android/GettingStarted/1/index.html</a></p>
<h3><a name="i1"> CodeWorks for Android をインストールする</a></h3>
<p>
UE4 をインストールした場所を EngineInstallLocation とすると，<br></p>
<pre>
[EngineInstallLocation]\Epic Gamses\UE_[EngineVersion]\Engine\Extras\AndroidWorks\Win64
</pre>
<p>
EngineVersion は現在使用している UE4 のバージョンが入る．<br></p>
<ol class="list1">
  <li> 最初のウィンドウを「Next」でインストールが始まる</li>
  <li> 「Next」で続行</li>
  <li> 「NVPACK」と「CodeWorksforAndroid」をインストールする場所を聞かれるので設定する<br>
NVPACK には SDK, NDK, JDK が含まれている．プライバシー情報は嫌ならチェックを外す．</li>
  <li> NVIDIA CodeWorks for Android Component Manager が開かれるので「Next」
大正にしたい</li>
  <li> ライセンス条件に同意する場合は「Accept All」にチェック入れて「Accept」</li>
  <li> CodeWorks for Android ツールのダウンロードが開始される</li>
  <li> 終わったら「Next」で続行</li>
  <li> 「Finish」で終了する</li>
  <li> 最後に PC を再起動するか聞かれるので，問題がなければ再起動する<br>
再起動時に環境変数が設定される．</li>
</ol>
<h3><a name="i2"> プロジェクトの設定を行う</a></h3>
<p>
UE4 を起動してプロジェクトの設定を行う．</p>
<ol class="list1">
  <li> 「編集」から「プロジェクトの設定」を選択</li>
  <li> 左のパネルをスクロールして「プラットフォーム」から「Android」をクリック</li>
  <li> 「プロジェクトは Android プラットフォームに対応していません」と赤帯で表示されているので「今すぐ設定」をクリック<br>
クリックすると帯が緑色に変わって「プラットフォームファイルは書き込み可能です」となる．</li>
  <li> 帯の少し下にある「Accept SDK License」をクリック<br>
これをクリックすると別プロジェクトの設定がリセットされているので，プロジェクトを移るたびにクリックする必要がある．(UE4 4.24.3)</li>
  <li> 左のパネルから「Android SDK」をクリック</li>
  <li> 「Location of Android SDK」に SDK の場所を設定する<br>
NVPACK にある SDK を選択する場合は「android-sdk-windows」を選択する．</li>
  <li> 「Location of Android NDK」に NDK の場所を設定する<br>
NVPACK にある NDK を選択する場合は「android-ndk-r14b」を選択する．「r14b」は Android の対象バージョンによって異なる．</li>
  <li> 「Location of Android JDK」に NDK の場所を設定する<br>
NVPACK にある NDK を選択する場合は「jdk1.8.0_77」を選択する．jdk 以降の数値は JAVA のバージョンによって異なる．</li>
</ol>
<h3><a name="i3"> Android 端末の設定を行う</a></h3>
<ol class="list1">
  <li> Android 端末の設定から「開発者向けオプション」を有効にする<br>
バージョン番号を連打など．</li>
  <li> 「開発者向けオプション」から「USBデバッグ」を有効にする</li>
  <li> PC と USB ケーブルで接続し，「ファイルを転送」を選択，「USBデバッグを許可」で OK をタップする</li>
</ol>
<h3><a name="i4"> UE4 から実行する</a></h3>
<p>
「起動」の横の▼をクリックして，端末名をクリックするとビルドとデプロイが行われる</p>
<h2><a name="i5"> TileMapで配置したマップに黒い縁が出る</a></h2>
<p>
UE4 4.24.3</p>
<p>
ドット絵を読み込むと UE4 がデフォルトでフィルタをかけてしまう．<br>その状態ではアルファがない画像に対しては周りに半透明でぼやけたような効果が入ってしまう．<br>UE4 から画像をダブルクリックして開き，右の「詳細」パネルから「Texture」カテゴリ内▼をクリックしてオプションを開いて「Filter」を「Nearest」に設定する．</p>
<h2><a name="i6"> TileMapを配置してキャラクタを動かすと黒い線が出てちらつく</a></h2>
<p>
UE4 4.24.3</p>
<p>
マップチップの各画像に余白があり，MapSet で BorderMargin, Per-Tile Spacing で中をくり抜いている場合に発生する．<br>Unity では 1px を空けることで解決するようだが(<a href="https://www.f-sp.com/entry/2016/11/24/152957">https://www.f-sp.com/entry/2016/11/24/152957</a>)，UE4 は逆に余白を空けないようにする．</p>

<hr>
<div class="footer">
Generated by <a href="http://www2u.biglobe.ne.jp/~MAS/soft.html#htwiki">ひとりWiki</a> version 2.10.0
</div>
</body>
</html>
