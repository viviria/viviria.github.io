require=function o(r,s,c){function l(t,e){if(!s[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(p)return p(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var i=s[t]={exports:{}};r[t][0].call(i.exports,function(e){return l(r[t][1][e]||e)},i,i.exports,o,r,s,c)}return s[t].exports}for(var p="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({food:[function(e,t,n){"use strict";cc._RF.push(t,"313e9+z+RhF7JA29OKsy2wj","food");var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var i=cc.Enum({MEET:0,VEGETABLE:1,DRINK:2,FRUIT:3,SPECIAL:4}),o=cc.Enum({SEKIRYU:0}),r=function(){function n(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this._foodType=e,this._specialFoodType=t}return a(n,[{key:"type",get:function(){return this._foodType}},{key:"specialFoodType",get:function(){return this._specialFoodType}}]),n}();t.exports={Food:r,FoodType:i,SpecialFoodType:o},cc._RF.pop()},{}],gameManager:[function(e,t,n){"use strict";cc._RF.push(t,"f2260RiVVRI7o2PpuT0JxD3","gameManager");var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var r=e("player").Player,i=function(){function o(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,o),this._players=[],this._turnPlayerIndex=0;for(var n=e>t.length?t.length:e,a=0;a<n;a++){var i=new r(t[a],"hiro"==t[a]);this._players.push(i)}}return a(o,[{key:"getPlayers",value:function(){return this._players}},{key:"init",value:function(){}},{key:"cleanUp",value:function(){this._turnPlayerIndex=(this._turnPlayerIndex+1)%this._players.length}},{key:"getTurnPlayer",value:function(){return this._players[this._turnPlayerIndex]}},{key:"showPlayer",value:function(){for(var e=0;e<this._players.length;e++)cc.log(this._players[e])}}]),o}();t.exports={GameManager:i},cc._RF.pop()},{player:"player"}],game:[function(e,t,n){"use strict";cc._RF.push(t,"012b1yJ2hZOMLkBge6DMWME","game");var a=e("./modules/gameManager").GameManager,i=e("./modules/mapTIleManager").MapTileManager,o=cc.Enum({PLAYING:0,PLAYER_DETAIL_WINDOW:1}),r=cc.Enum({OTHER_PLAYER_WINDOW:0,CUSTOMER_WINDOW:1,ACTION_WINDOW:2}),s=["hiro","aya","shino","yomo"];cc.Class({extends:cc.Component,properties:{_isLoadEnd:!1,_playerNum:0,_gameState:o.PLAYING,_LeftWindowState:r.OTHER_PLAYER_WINDOW,_gameManager:null,_mapTileManager:null},onTapClosePlayerDetailWindow:function(){var e=this;this._gameState==o.PLAYER_DETAIL_WINDOW&&this.node.getChildByName("playerDetailWindow").getComponent("playerDetailWindow").close(function(){e._gameState=o.PLAYING})},onTapShowPlayerDetailWindow:function(){var e=this.node.getChildByName("playerDetailWindow");e.active||this._gameState!=o.PLAYING||(this._gameState=o.PLAYER_DETAIL_WINDOW,e.getComponent("playerDetailWindow").open())},onTapChangeLeftWindow:function(){var e=this.node.getChildByName("otherPlayersWindow"),t=this.node.getChildByName("customersWindow"),n=this.node.getChildByName("actionsWindow");switch(e.active=!1,t.active=!1,n.active=!1,this._LeftWindowState){case r.OTHER_PLAYER_WINDOW:t.active=!0,this._LeftWindowState=r.CUSTOMER_WINDOW;break;case r.CUSTOMER_WINDOW:n.active=!0,this._LeftWindowState=r.ACTION_WINDOW;break;case r.ACTION_WINDOW:e.active=!0,this._LeftWindowState=r.OTHER_PLAYER_WINDOW}},updatePlayerDetail:function(){for(var e=this._gameManager.getPlayers(),t=0;t<e.length;t++){var n=e[t],a=n.name,i=n.point,o=n.foodHands,r=n.specialHands,s=this.node.getChildByName("otherPlayersWindow").getChildByName(a);if(n.isOwn)this.node.getChildByName("pointLabel").getComponent(cc.Label).string=i+" pt";else if(s){s.getChildByName("pointLabel").getComponent(cc.Label).string=i+" pt",s.getChildByName("handNumLabel").getComponent(cc.Label).string="×"+o.length,s.getChildByName("marketingHandNumLabel").getComponent(cc.Label).string="×"+r.length}}},touchSetting:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){e.getLocation()}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){e.getLocation()}),this.node.on(cc.Node.EventType.TOUCH_END,function(e){})},init:function(){cc.director.getCollisionManager().enabled=!0,this._isLoadEnd=!1,this._playerNum=4,this._gameManager=new a(this._playerNum,s),this._mapTileManager=new i},onLoad:function(){var n=this;this.init(),cc.loader.load(cc.url.raw("resources/json/mapTile.json"),function(e,t){null===e&&(n._mapTileManager.load(t),n._isLoadEnd=!0)})},gameInit:function(){this._gameManager.showPlayer(),this._gameManager.init(),this.updatePlayerDetail();for(var e=[],t=0;t<s.length;t++){var n=this.node.getChildByName(s[t]);t<this._playerNum?e.push(n):n.active=!1}var a=this.node.getChildByName("map");a.getComponent("map").setMapTileManager(this._mapTileManager),a.getComponent("map").createEmptyMap(this._playerNum,e),this.touchSetting()},start:function(){},update:function(e){this._isLoadEnd&&(this.gameInit(),this._isLoadEnd=!1)}}),cc._RF.pop()},{"./modules/gameManager":"gameManager","./modules/mapTIleManager":"mapTIleManager"}],mapTIleManager:[function(e,t,n){"use strict";cc._RF.push(t,"2ac0bRH4v9MZqXzIofRKyEJ","mapTIleManager");var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var i=cc.Enum({MEAT:0,VEGETABLE:1,DRINK:2,FRUITS:3,SPECIAL:4,ALL:5,START:6,EMPTY:7,REVERSE:8}),o=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._deck=null,this._startMapTile=null,this._mapTileData=null}return a(e,[{key:"shuffle",value:function(e){for(var t=e.length-1;0<t;t--){var n=Math.floor(cc.random0To1()*(t+1)),a=e[t];e[t]=e[n],e[n]=a}}},{key:"load",value:function(e){this._mapTileData=e,this._startMapTile=this._mapTileData.filter(function(e){return e._type==i.START}),this.shuffle(this._startMapTile)}},{key:"startTiles",get:function(){return this._startMapTile}}]),e}();t.exports={IconType:i,IconNames:["meat","vegetable","drink","fruits","special","all","start","empty","reverse"],MapTileManager:o},cc._RF.pop()},{}],mapTile:[function(e,t,n){"use strict";cc._RF.push(t,"f6ed4klKn9Cr7dnlF6BKtr8","mapTile");var a=e("./mapTIleManager"),i=a.IconType,o=a.IconNames;cc.Class({extends:cc.Component,properties:{mapTileAtlas:{default:null,type:cc.SpriteAtlas},_type:i.EMPTY,_playerIcon:null},setMapTile:function(e,t){this._type=e,this.node.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.mapTileAtlas.getSpriteFrame(o[this._type]);for(var n=this.node.getChildByName("edges").getChildren(),a=t._join,i=0;i<n.length;i++)n[i].getComponent(cc.Sprite).spriteFrame=this.mapTileAtlas.getSpriteFrame("edge"+a[i])},setPlayerIcon:function(e){this._playerIcon=e,this._playerIcon.removeFromParent(),this.node.addChild(this._playerIcon),this._playerIcon.position=cc.p(-30,30)},removePlayerIcon:function(){this.node.removeChild(this._playerIcon);var e=this._playerIcon;return this._playerIcon=null,e},start:function(){}}),cc._RF.pop()},{"./mapTIleManager":"mapTIleManager"}],map:[function(e,t,n){"use strict";cc._RF.push(t,"e9f70XOCvBOMZIiOlaRpHlp","map");var r=e("./modules/mapTIleManager").IconType;cc.Class({extends:cc.Component,properties:{mapTile:{default:null,type:cc.Prefab},_mapTileManager:null,_mapWidth:0,_mapHeight:0},setMapTileManager:function(e){this._mapTileManager=e},__setMapSize:function(e){switch(e){case 2:this._mapWidth=5,this._mapHeight=5;break;case 3:case 4:this._mapWidth=7,this._mapHeight=7}},__setStartMap:function(i,e){for(var o=this,t=this.node.getChildren().filter(function(e,t){var n=t%o._mapWidth,a=Math.floor(t/o._mapWidth);return i<3?e.active&&(0==a||a==o._mapHeight-1):e.active&&(0==a||a==o._mapHeight-1||0==n||n==o._mapWidth-1)}),n=this._mapTileManager.startTiles,a=0;a<t.length;a++)t[a].getComponent("mapTile").setMapTile(r.START,n[a]),t[a].getComponent("mapTile").setPlayerIcon(e[a])},createEmptyMap:function(e,t){this.__setMapSize(e);for(var n={start:-Math.floor(this._mapWidth/2),end:Math.floor(this._mapWidth/2)},a={start:-Math.floor(this._mapHeight/2),end:Math.floor(this._mapHeight/2)},i=0,o=1,r=n.start;r<=n.end;r++){for(var s=a.start;s<=a.end;s++){var c=cc.instantiate(this.mapTile),l=c.getContentSize();c.position=cc.p(s*l.width,r*l.height),c.active=-i<=s&&s<=i,this.node.addChild(c)}i+=o*=0==r?-1:1}this.__setStartMap(e,t)},onLoad:function(){},start:function(){}}),cc._RF.pop()},{"./modules/mapTIleManager":"mapTIleManager"}],playerDetailWindow:[function(e,t,n){"use strict";cc._RF.push(t,"5c141LXF7REubw2/Ye9ydxu","playerDetailWindow");cc.Class({extends:cc.Component,properties:{},open:function(){this.node.active=!0,this.node.runAction(cc.scaleTo(.2,1))},close:function(e){var t=this;this.node.runAction(cc.sequence(cc.scaleTo(.2,0),cc.callFunc(function(){t.node.active=!1,e&&e()})))},start:function(){}}),cc._RF.pop()},{}],player:[function(e,t,n){"use strict";cc._RF.push(t,"21b15G8nMdDT5z/cM+pf7Ob","player");var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var i=function(){function n(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this._name=e,this._isOwn=t,this._point=0,this._foodHands=[],this._specialHands=[],this._cutomers=[]}return a(n,[{key:"__addPoint",value:function(e){this._point+=e}},{key:"addCustomer",value:function(e){this._cutomers.push(e)}},{key:"addFoodHand",value:function(e){this._foodHands.push(e)}},{key:"addSpecialHand",value:function(e){this._specialHands.push(e)}},{key:"name",get:function(){return this._name}},{key:"isOwn",get:function(){return this._isOwn}},{key:"point",get:function(){return this._point}},{key:"customers",get:function(){return this._cutomers}},{key:"foodHands",get:function(){return this._foodHands}},{key:"specialHands",get:function(){return this._specialHands}}]),n}();t.exports={Player:i},cc._RF.pop()},{}]},{},["game","map","food","gameManager","mapTIleManager","mapTile","player","playerDetailWindow"]);
//# sourceMappingURL=project.js.map