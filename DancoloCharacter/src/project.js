require=function a(o,r,h){function p(t,e){if(!r[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(s)return s(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var l=r[t]={exports:{}};o[t][0].call(l.exports,function(e){return p(o[t][1][e]||e)},l,l.exports,a,o,r,h)}return r[t].exports}for(var s="function"==typeof require&&require,e=0;e<h.length;e++)p(h[e]);return p}({main:[function(e,t,i){"use strict";cc._RF.push(t,"3637b6RUqhBOojxxpwc6FIv","main");var n=e("./player").Player,l=e("./player").SkillName,r=[l.POWER,l.TOUGH,l.MAGIC,l.AGILITY];cc.Class({extends:cc.Component,properties:{_player:null,_addSkillPoint:0,upSprite:{type:cc.SpriteFrame,default:null},downSprite:{type:cc.SpriteFrame,default:null},offSprite:{type:cc.SpriteFrame,default:null}},onLoad:function(){this._player=new n,this.playerLevelUp()},start:function(){},damage:function(){this._player.damage();var e=this._player.getHp();if(this.node.getChildByName("hp").getChildByName("value").getComponent(cc.Label).string=e+"",this._player.isDead()){var t=this.node.getChildByName("hp").getChildByName("up"),i=this.node.getChildByName("hp").getChildByName("down");this.buttonEnabled(t,!1),this.buttonEnabled(i,!1);var n=this.node.getChildByName("exp").getChildByName("up");this.buttonEnabled(n,!1),this.node.getChildByName("gameover").runAction(cc.moveTo(1,cc.p(0,0)))}},heal:function(){this._player.heal();var e=this._player.getHp();this.node.getChildByName("hp").getChildByName("value").getComponent(cc.Label).string=e+""},buttonEnabled:function(e,t,i){e.getComponent(cc.Button).interactable=t,e.getComponent(cc.Sprite).spriteFrame=t?i?this.upSprite:this.downSprite:this.offSprite},okButtonEnabled:function(e){var t=this.node.getChildByName("levelUpWindow").getChildByName("ok");t.getComponent(cc.Button).interactable=e,t.getComponent(cc.Sprite)._sgNode.setState(e?0:1)},allSkillUpButonEnabled:function(e){for(var t=this.node.getChildByName("levelUpWindow").getChildren(),i=0;i<t.length;i++){var n=t[i].getChildByName("up");n&&this.buttonEnabled(n,e,!0)}},allSkillDownButonEnabled:function(e){for(var t=this.node.getChildByName("levelUpWindow").getChildren(),i=0;i<t.length;i++){var n=t[i].getChildByName("down");n&&this.buttonEnabled(n,e,!1)}},addExp:function(e){var t=this._player.addExp(),i=this.node.getChildByName("exp").getChildByName("value"),n=this._player.getExp();i.getComponent(cc.Label).string=n+"",t&&(this.buttonEnabled(e.target,!1),this.playerLevelUp())},playerLevelUp:function(){var e=this;this._addSkillPoint=this._player.levelUp(),this.allSkillUpButonEnabled(!0),this.allSkillDownButonEnabled(!1);var t=this.node.getChildByName("levelUpWindow");t.runAction(cc.sequence(cc.callFunc(function(){e.levelUpWindowSetting(t)}),cc.moveTo(1,cc.p(0,0))))},levelUpWindowSetting:function(e,t){e.getChildByName("skill").getChildByName("value").getComponent(cc.Label).string=this._addSkillPoint+"",this.okButtonEnabled(!1);var i=this._player.getSkill();for(var n in i){e.getChildByName(n).getChildByName("value").getComponent(cc.Label).string=i[n]+""}this.allSkillDownButonEnabled(!1)},skillUp:function(e){var t=e.target.parent.getChildByName("value"),i=Number(t.getComponent(cc.Label).string);i++,t.getComponent(cc.Label).string=i+"";var n=this.node.getChildByName("levelUpWindow").getChildByName("skill").getChildByName("value"),l=Number(n.getComponent(cc.Label).string);l--,n.getComponent(cc.Label).string=l+"";var a=e.target.parent.getChildByName("down");this.buttonEnabled(a,!0),l<=0&&(this.okButtonEnabled(!0),this.allSkillUpButonEnabled(!1))},skillDown:function(e){var t=this._player.getSkill(),i=e.target.parent.getChildByName("value"),n=Number(i.getComponent(cc.Label).string),l=this.node.getChildByName("levelUpWindow").getChildByName("skill").getChildByName("value"),a=Number(l.getComponent(cc.Label).string),o=e.target.parent.name;n<=t[o]||a>=this._addSkillPoint||(n--,i.getComponent(cc.Label).string=n+"",n<=t[o]&&this.buttonEnabled(e.target,!1),a++,l.getComponent(cc.Label).string=a+"",0<a&&(this.okButtonEnabled(!1),this.allSkillUpButonEnabled(!0)))},levelUpOk:function(){var t=this,e=this._player.getLevel();this.node.getChildByName("level").getChildByName("value").getComponent(cc.Label).string=e+"";var i=this._player.getHp();this.node.getChildByName("hp").getChildByName("value").getComponent(cc.Label).string=i+"";for(var n=this.node.getChildByName("levelUpWindow"),l=0;l<r.length;l++){var a=n.getChildByName(r[l]).getChildByName("value"),o=Number(a.getComponent(cc.Label).string);this._player.setSkill(r[l],o),this.node.getChildByName(r[l]).getChildByName("value").getComponent(cc.Label).string=o+""}n.runAction(cc.sequence(cc.moveTo(1,cc.p(-800,0)),cc.callFunc(function(){n.position=cc.p(800,0);var e=t.node.getChildByName("exp").getChildByName("up");t.buttonEnabled(e,!0)})))}}),cc._RF.pop()},{"./player":"player"}],player:[function(e,t,i){"use strict";cc._RF.push(t,"ba1cc0RtGdBwIH5cYOEmIIt","player");var n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();var l=[0,3,7,11,16,21,27,34,42,50],a=[{hp:12,skill:5},{hp:3,skill:1},{hp:3,skill:1},{hp:3,skill:1},{hp:3,skill:1},{hp:3,skill:1},{hp:3,skill:1},{hp:3,skill:1},{hp:3,skill:1},{hp:4,skill:2}],o=cc.Enum({POWER:"power",TOUGH:"tough",MAGIC:"magic",AGILITY:"agility"}),r=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._lv=0,this._exp=0,this._hp=0,this._maxHp=0,this._power=0,this._tough=0,this._magic=0,this._agility=0}return n(e,[{key:"getLevel",value:function(){return this._lv}},{key:"levelUp",value:function(){var e=a[this._lv];return this._hp+=e.hp,this._maxHp+=e.hp,this._lv++,e.skill}},{key:"addExp",value:function(){this._exp++;for(var e=0;e<l.length;e++)if(this._exp==l[e])return!0;return!1}},{key:"getExp",value:function(){return this._exp}},{key:"setSkill",value:function(e,t){switch(e){case o.POWER:this._power=t;break;case o.TOUGH:this._tough=t;break;case o.MAGIC:this._magic=t;break;case o.AGILITY:this._agility=t}}},{key:"getSkill",value:function(){return{power:this._power,tough:this._tough,magic:this._magic,agility:this._agility}}},{key:"getHp",value:function(){return this._hp}},{key:"heal",value:function(){this._hp<this._maxHp&&!this.isDead()&&this._hp++}},{key:"damage",value:function(){0<this._hp&&this._hp--}},{key:"isDead",value:function(){return this._hp<=0}}]),e}();t.exports={Player:r,SkillName:o},cc._RF.pop()},{}]},{},["main","player"]);
//# sourceMappingURL=project.js.map